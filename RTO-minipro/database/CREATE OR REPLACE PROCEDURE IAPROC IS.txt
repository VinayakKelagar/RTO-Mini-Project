CREATE OR REPLACE PROCEDURE IAPROC IS
M1 NUMBER;
M2 NUMBER;
M3 NUMBER;
IAV NUMBER;
CURSOR IACUR IS SELECT TEST1, TEST2, TEST3 FROM T1 FOR UPDATE;
BEGIN
OPEN IACUR;
LOOP
FETCH IACUR INTO M1, M2, M3;
EXIT WHEN IACUR%NOTFOUND;
IF(M1 >= M2 AND M2 >= M3) THEN
	IAV:= CEIL((M1 + M2)/2);
ELSIF(M2 >= M1 AND M3 >= M1) THEN
	IAV:= CEIL((M2 + M3)/2);
ELSE
	IAV:= CEIL((M1 + M3)/2);
END IF;
UPDATE T1 SET FINAL_MARKS = IAV WHERE CURRENT OF IACUR;
END LOOP;
CLOSE  IACUR;
END;
/
